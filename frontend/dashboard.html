<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdPay - Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>AdPay</h2>
            </div>
            
            <!-- Desktop Navigation -->
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="#watch-ads">Watch Ads</a>
                <a href="#earnings">Earnings</a>
                <a href="#referrals">Referrals</a>
                <a href="#withdraw">Withdraw</a>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <a href="/" onclick="toggleMobileMenu()">Home</a>
            <a href="#watch-ads" onclick="toggleMobileMenu()">Watch Ads</a>
            <a href="#earnings" onclick="toggleMobileMenu()">Earnings</a>
            <a href="#referrals" onclick="toggleMobileMenu()">Referrals</a>
            <a href="#withdraw" onclick="toggleMobileMenu()">Withdraw</a>
            <button class="btn-logout" onclick="logout(); toggleMobileMenu();">Logout</button>
        </div>
    </nav>

    <main class="dashboard">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <div class="container">
                <h1>Welcome, <span id="userName">User</span>!</h1>
                <div class="stats-cards">
                    <div class="stat-card">
                        <h3>Current Balance</h3>
                        <div class="amount" id="currentBalance">₦0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>Total Earned</h3>
                        <div class="amount" id="totalEarned">₦0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>Ads Watched Today</h3>
                        <div class="amount" id="adsWatchedToday">0/<span id="adLimit">0</span></div>
                    </div>
                    <div class="stat-card">
                        <h3>Referral Bonus</h3>
                        <div class="amount" id="referralBonus">₦0.00</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Watch Ads Section -->
        <section id="watch-ads" class="watch-ads-section">
            <div class="container">
                <h2>Watch Ads & Earn Money</h2>
                <div class="ad-container">
                    <div id="adDisplay">
                        <p>Click the button below to load an ad. Watch it completely to earn.</p>
                        <div class="ad-placeholder" id="adPlaceholder">
                            <!-- Ad content will be loaded here -->
                        </div>
                        <button class="btn-primary" id="loadAdBtn" onclick="loadAd()">Load Ad</button>
                        <button class="btn-secondary" id="watchAdBtn" style="display: none;" onclick="watchAd()">Watch Ad (30s)</button>
                    </div>
                    <div id="adResult" style="display: none;">
                        <h3>Ad Completed!</h3>
                        <p>You've earned <span id="earnedAmount">₦0</span> for watching this ad.</p>
                        <button class="btn-primary" onclick="loadAd()">Watch Another Ad</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Earnings Section -->
        <section id="earnings" class="earnings-section">
            <div class="container">
                <h2>Earnings & Transactions</h2>
                <div class="transactions">
                    <table id="transactionsTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Transactions will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Referrals Section -->
        <section id="referrals" class="referrals-section">
            <div class="container">
                <h2>Refer & Earn</h2>
                <div class="referral-info">
                    <p>Refer friends and earn ₦500 for Basic users and ₦1,000 for Premium users!</p>
                    <div class="referral-code">
                        <strong>Your Referral Code:</strong>
                        <span id="referralCodeDisplay">Loading...</span>
                        <button class="btn-secondary" onclick="copyReferralCode()">Copy</button>
                    </div>
                    <div class="referral-stats">
                        <h3>Referral Stats</h3>
                        <div id="referralStats">
                            <!-- Referral stats will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Withdrawal Section -->
        <section id="withdraw" class="withdrawal-section">
            <div class="container">
                <h2>Withdraw Earnings</h2>
                <div class="withdrawal-info">
                    <p>Minimum withdrawal: <span id="minWithdrawal">₦0</span></p>
                    <p>Next payment date: <span id="nextPaymentDate">Loading...</span></p>
                </div>
                <div class="withdrawal-form">
                    <h3>Bank Details</h3>
                    <form id="bankForm">
                        <input type="text" id="bankName" placeholder="Bank Name" required>
                        <input type="text" id="accountNumber" placeholder="Account Number" required>
                        <input type="text" id="accountName" placeholder="Account Name" required>
                        <button type="submit" class="btn-primary">Save Bank Details</button>
                    </form>
                </div>
                <div class="withdrawal-request">
                    <h3>Request Withdrawal</h3>
                    <form id="withdrawalForm">
                        <input type="number" id="withdrawAmount" placeholder="Amount" min="0" step="1" required>
                        <button type="submit" class="btn-primary">Request Withdrawal</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <script src="js/dashboard.js"></script>
</body>
</html>